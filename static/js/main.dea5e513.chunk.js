(this["webpackJsonpfloppy-disk-music"]=this["webpackJsonpfloppy-disk-music"]||[]).push([[0],[,,,,function(e,t,n){e.exports={songTable:"SongList_songTable__3iwG3",noWrap:"SongList_noWrap__dxJ0t",mobileSongTable:"SongList_mobileSongTable__2lNnP",mobileSong:"SongList_mobileSong__LpCCG"}},,,function(e,t,n){e.exports={buttons:"PlayerControls_buttons__2Q_jW",imageContainer:"PlayerControls_imageContainer__1cIVJ",boxImage:"PlayerControls_boxImage__VEoIC",songName:"PlayerControls_songName__1eDfD"}},,,,,function(e,t,n){e.exports={Box:"Box_Box__1zQUc",orange:"Box_orange__OLv20"}},function(e,t,n){e.exports={IconButton:"IconButton_IconButton__ovxH-",icon:"IconButton_icon__3_7uf"}},,function(e,t,n){e.exports={IconLink:"IconLink_IconLink__3PrTB",icon:"IconLink_icon__3kPXE"}},,,,,function(e,t,n){e.exports={Grid:"Grid_Grid__1He54"}},function(e,t,n){},function(e,t,n){e.exports=n(35)},,,,,function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(17),s=n.n(c),i=(n(27),n(10)),l=(n(28),n(6)),u=n(3),m=n.n(u),p=n(18),f=n(19);!function(e){e[e.NTSC=7159090.5]="NTSC",e[e.PAL=7093789.2]="PAL"}(a||(a={}));var d=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function c(e){try{i(a.next(e))}catch(t){o(t)}}function s(e){try{i(a.throw(e))}catch(t){o(t)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,s)}i((a=a.apply(e,t||[])).next())}))};function h(e){return d(this,void 0,void 0,m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return","string"===typeof e?y(e):k(e));case 1:case"end":return t.stop()}}),t)})))}function k(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(){t(a.result)},a.onerror=function(){n("TIMEOUT")},a.onabort=function(){n("ABORT")},console.log("[INFO] Attempting to read file:",e),a.readAsArrayBuffer(e)}))}function y(e){return new Promise((function(t,n){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){a.response?t(a.response):n("EMPTY")},a.onerror=function(){n("ERROR")},a.ontimeout=function(){n("TIMEOUT")},a.onabort=function(){n("ABORT")},console.log("[INFO] Attempting to read file from URL: '".concat(e,"'")),a.send()}))}function g(e,t,n){return String.fromCharCode.apply(null,Array.from(new Uint8Array(e.slice(t,n))))}function b(e){var t=E(e),n=4;switch(t){case"8CHN":case"FLT8":case"CD81":case"OKTA":case"OCTA":n=8;break;case"6CHN":n=6;break;case"2CHN":n=2;break;default:/^[0-9][0-9]C[H,N]$/.test(t)?n=parseInt(t.substr(0,2)):/^TDZ[0-9]$/.test(t)?n=parseInt(t.substr(3)):/^[579]CHN$/.test(t)&&(n=parseInt(t.substr(0,1)))}return n}function E(e){return g(e,1080,1084)}var v=[{name:"protracker",getInitOptions:function(e){if(!function(e){return"Unknown format"!==function(e){var t=E(e),n="Unknown format";switch(t){case"M.K.":n="ProTracker";break;case"M!K!":case"M&K!":n="ProTracker (extended patterns)";break;case"6CHN":n="ProTracker (6 channels)";break;case"8CHN":n="ProTracker (8 channels)";break;case"2CHN":n="FastTracker (2 channels)";break;case"CD81":case"OKTA":n="Oktalyzer";break;case"OCTA":n="Octamed";break;case"FLT4":n="StarTrekker";break;case"FLT8":n="StarTrekker (8 channels)";break;default:/^[0-9][0-9]CH$/.test(t)&&(n="FastTracker (".concat(parseInt(t.substr(0,2))," channels)")),/^[0-9][0-9]CN$/.test(t)?n="TakeTracker (".concat(parseInt(t.substr(0,2))," channels)"):/^TDZ[0-9]$/.test(t)?n="TakeTracker (".concat(parseInt(t.substr(3))," channels)"):/^[579]CHN$/.test(t)&&(n="TakeTracker (".concat(parseInt(t.substr(0,1))," channels)"))}return n}(e)}(e))throw new Error;var t=b(e);return{numberOfOutputs:t,outputChannelCount:Object(l.a)(new Array(t)).map((function(e){return 1})),processorOptions:{fileData:e}}},options:{},path:"/floppy-disk-music/players/protracker.js"}],w=function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function c(e){try{i(a.next(e))}catch(t){o(t)}}function s(e){try{i(a.throw(e))}catch(t){o(t)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,s)}i((a=a.apply(e,t||[])).next())}))},_=function(){function e(t){var n=this;Object(p.a)(this,e),this.connected=!1,this.status="not-ready",this.onMessage=function(e){"ended"===e.data&&(console.info("[Wurlitzer] - Song has ended"),n.stop())},this.audioContext=t||("undefined"!==typeof window?new(window.AudioContext||window.webkitAudioContext):globalThis)}return Object(f.a)(e,[{key:"load",value:function(e){return w(this,void 0,void 0,m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(e);case 2:return n=t.sent,t.next=5,C(n,this.audioContext);case 5:a=t.sent,this.stop(),this.fileData=n,this.player=a,this.player.port.onmessage=this.onMessage,this.mixer=x(this.audioContext,this.player),this.status="ready";case 12:case"end":return t.stop()}}),t,this)})))}},{key:"pause",value:function(){this.player&&"ready"===this.status&&(this._disconnect(),this.player.port.postMessage({cmd:"pause"}))}},{key:"play",value:function(){return w(this,void 0,void 0,m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.fileData||"stopped"!==this.status){e.next=7;break}return e.next=3,C(this.fileData,this.audioContext);case 3:this.player=e.sent,this.player.port.onmessage=this.onMessage,this.mixer=x(this.audioContext,this.player),this.status="ready";case 7:this.player&&"ready"===this.status&&(this._connect(),this.player.port.postMessage({cmd:"play"}));case 8:case"end":return e.stop()}}),e,this)})))}},{key:"previousSubtrack",value:function(){this.player&&this.player.port.postMessage({cmd:"previousSubtrack"})}},{key:"nextSubtrack",value:function(){this.player&&this.player.port.postMessage({cmd:"nextSubtrack"})}},{key:"reset",value:function(){this.player&&this.player.port.postMessage({cmd:"reset"})}},{key:"setSubtrack",value:function(e){this.player&&this.player.port.postMessage({cmd:"setSubtrack",data:e})}},{key:"skipToPosition",value:function(e){this.player&&this.player.port.postMessage({cmd:"skipToPosition",data:e})}},{key:"stop",value:function(){this.player&&"ready"===this.status&&(this._disconnect(),this.player.port.postMessage({cmd:"stop"}),this.status="stopped")}},{key:"_connect",value:function(){this.mixer&&!this.connected&&(this.mixer.connect(this.audioContext.destination),this.connected=!0)}},{key:"_disconnect",value:function(){this.mixer&&this.connected&&(this.mixer.disconnect(),this.connected=!1)}}]),e}();function x(e,t){var n=new ChannelMergerNode(e,{numberOfInputs:2});return 4===t.numberOfOutputs?([0,3].forEach((function(e){return t.connect(n,e,0)})),[1,2].forEach((function(e){return t.connect(n,e,1)}))):(Object(l.a)(new Array(t.numberOfOutputs)).map((function(e,t){return t})).filter((function(e){return e%2===0})).forEach((function(e){return t.connect(n,e,0)})),Object(l.a)(new Array(t.numberOfOutputs)).map((function(e,t){return t})).filter((function(e){return e%2!==0})).forEach((function(e){return t.connect(n,e,1)}))),n}function C(e,t){return w(this,void 0,void 0,m.a.mark((function n(){var a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(v.forEach((function(t){try{a=Object.assign(Object.assign({},t),{options:t.getInitOptions(e)})}catch(n){}})),a){n.next=3;break}throw new Error("This file is not supported");case 3:return n.prev=3,n.abrupt("return",new AudioWorkletNode(t,a.name,a.options));case 7:return n.prev=7,n.t0=n.catch(3),n.next=11,t.audioWorklet.addModule(a.path);case 11:return n.abrupt("return",new AudioWorkletNode(t,a.name,a.options));case 12:case"end":return n.stop()}}),n,null,[[3,7]])})))}var T=n(12),S=n.n(T),N=function(e){return o.a.createElement("div",Object.assign({className:"".concat(S.a.Box," ").concat(e.orange?S.a.orange:"")},e),e.children)},O=n(20),P=n.n(O),I=function(e){return o.a.createElement("div",{className:P.a.Grid},e.children)},B=n(21),A=n.n(B),z=function(e){return o.a.createElement("header",{className:A.a.header},o.a.createElement("h1",null,"Floppy Disk Music"),o.a.createElement("h2",null,"Javascript retro music player"))},M=n(7),L=n.n(M),j=n(13),D=n.n(j),K=n(9),F=function(e){return o.a.createElement("button",{type:"button",className:D.a.IconButton,onClick:e.onClick,title:e.title},o.a.createElement(K.a,{icon:e.icon,className:D.a.icon}))},H=n(2),W=function(e){return o.a.createElement("img",{className:L.a.boxImage,src:"".concat("/floppy-disk-music","/img/boxes/").concat(e.image||"unknown.jpg"),alt:e.name})},R=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:L.a.imageContainer},W(e.currentSong)),o.a.createElement("p",null,o.a.createElement("strong",{className:L.a.songName},e.currentSong.name),o.a.createElement("br",null),"".concat(e.currentSong.format,", ").concat(e.currentSong.channels," channels, ").concat(e.currentSong.size)),o.a.createElement("div",{className:L.a.buttons},o.a.createElement(F,{icon:H.c,onClick:e.play,title:"Play"}),o.a.createElement(F,{icon:H.b,onClick:e.pause,title:"Pause"}),o.a.createElement(F,{icon:H.d,onClick:e.stop,title:"Stop"})))},$=n(4),G=n.n($),U=n(15),J=n.n(U),Q=function(e){return o.a.createElement("a",{href:e.href,className:J.a.IconLink,title:e.title},o.a.createElement(K.a,{icon:e.icon,className:J.a.icon}))},V=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("table",{className:G.a.songTable},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Title"),o.a.createElement("th",null,"Format"),o.a.createElement("th",null,"Channels"),o.a.createElement("th",null,"Size"),o.a.createElement("th",null,"\xa0"))),o.a.createElement("tbody",null,e.list.map((function(t){return o.a.createElement("tr",{key:t.name},o.a.createElement("td",null,t.name),o.a.createElement("td",null,t.format),o.a.createElement("td",null,t.channels),o.a.createElement("td",null,t.size),o.a.createElement("td",{className:G.a.noWrap},o.a.createElement(F,{icon:H.c,onClick:function(){return e.load(t)},title:"Load and play"}),o.a.createElement(Q,{icon:H.a,href:t.src,title:"Download"})))})))),o.a.createElement("ul",{className:G.a.mobileSongTable},e.list.map((function(t){return o.a.createElement("li",{className:G.a.mobileSong,key:t.name},o.a.createElement("div",null,o.a.createElement("strong",{className:G.a.mobileSongTitle},t.name),o.a.createElement("div",{className:G.a.mobileSongInfo},"".concat(t.format,", ").concat(t.channels," channels, ").concat(t.size))),o.a.createElement("div",{className:G.a.mobileSongControls},o.a.createElement(F,{icon:H.c,onClick:function(){return e.load(t)},title:"Load and play"}),o.a.createElement(Q,{icon:H.a,href:t.src,title:"Download"})))}))))},X=[{src:"".concat("/floppy-disk-music","/songs/dragonsfunk.mod"),name:"Dragons Funk",format:"Protracker",channels:4,size:"193KB"},{src:"".concat("/floppy-disk-music","/songs/Skid_Row2.mod"),name:"Skid Row 2",format:"Protracker",channels:4,size:"47KB"},{src:"".concat("/floppy-disk-music","/songs/SuperFrogTitle.mod"),name:"Super Frog",format:"Protracker",channels:4,image:"superfrog.jpg",size:"74KB"},{src:"".concat("/floppy-disk-music","/songs/too-speedy.mod"),name:"Too Speedy",format:"Protracker",channels:4,size:"37KB"},{src:"".concat("/floppy-disk-music","/songs/wizkid_1.mod"),name:"Wizkid round 1/8",format:"Protracker",channels:4,image:"wizkid.jpg",size:"38KB"},{src:"".concat("/floppy-disk-music","/songs/bedroomd.mod"),name:"Bedroom Door",format:"Protracker",channels:4,size:"85KB"},{src:"".concat("/floppy-disk-music","/songs/dsots-intro.mod"),name:"The Dark Side of the Spoon Intro",format:"Protracker",channels:4,size:"179KB"},{src:"".concat("/floppy-disk-music","/songs/moonclow.mod"),name:"A Clown in the Moon",format:"Protracker",channels:8,size:"211KB"},{src:"".concat("/floppy-disk-music","/songs/ecodreams.mod"),name:"Ecodreams",format:"Protracker",channels:4,size:"29KB"},{src:"".concat("/floppy-disk-music","/songs/wizard-2.mod"),name:"Wizard2",format:"Protracker",channels:4,size:"22KB"},{src:"".concat("/floppy-disk-music","/songs/bitner.mod"),name:"Bitner",format:"Protracker",channels:4,size:"130KB"}];var Z=function(){var e=Object(r.useState)(void 0),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),s=Object(i.a)(c,2),l=s[0],u=s[1],m=Object(r.useState)(void 0),p=Object(i.a)(m,2),f=p[0],d=p[1];return o.a.createElement("div",{className:"App"},o.a.createElement(z,null),o.a.createElement(I,null,o.a.createElement(N,null,o.a.createElement(V,{list:X,load:function(e){var t=f||new _;f||d(t),t.load(e.src).then((function(){a(e),u(!0),t.play()}))}})),o.a.createElement(N,null,n?o.a.createElement(R,{ready:l,play:function(){f&&f.play()},pause:function(){f&&f.pause()},stop:function(){f&&f.stop()},currentSong:n}):o.a.createElement("p",{style:{textAlign:"center"}},"No song loaded"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[22,1,2]]]);
//# sourceMappingURL=main.dea5e513.chunk.js.map